## Комп'ютерні системи імітаційного моделювання
## СПм-24-2, Аленевський Максим Олександрович
### Лабораторна робота №1. Опис імітаційних моделей та проведення обчислювальних експериментів

<br>

### Варіант 1, модель у середовищі NetLogo: [Traffic Grid](http://www.netlogoweb.org/launch#http://www.netlogoweb.org/assets/modelslib/Sample%20Models/Social%20Science/Traffic%20Grid.nlogox)

<br>

### Вербальний опис моделі:

Модель міського трафіку, організованого за сітковою схемою. Вона дозволяє регулювати світлофори, а також змінювати глобальні параметри, такі як обмеження швидкості та кількість автомобілів, що дає змогу аналізувати динаміку руху.

На кожному кроці автомобілі рухаються вперед із поточною швидкістю. Якщо їхня швидкість нижча за максимально дозволену і попереду немає інших машин, вони прискорюються. Якщо попереду є автомобіль, що рухається повільніше, вони підлаштовують свою швидкість відповідно до нього. При червоному світлі світлофора або коли попереду стоїть автомобіль, вони зупиняються.


### Внутрішні параметри:

### Глобальні параметри:

- **acceleration** - константа, що відповідає за прискорення всих машин
- **grid-x-inc** - кількість "патчів" між двома дорогами за \*х\* координатами
- **grid-y-inc** - кількість "патчів" між двома дорогами за \*у\* координатами
- **num-cars-stopped** - лічильник, що рахує кількість зупинених машин та кількість машин, що стоять, на поточному кроці моделювання
- **phase** - лічильник поточної фази циклу перемикань світлофорів

### Параметри машин 

- **speed** - швидкість машини
- **up-car** - напрямок руху машини (униз, вправо)
- **wait-time** - лічильник, що рахує кількість часу, що минуло після останнього руху


### Параметри доріг/ділянок 

- **intersection** - \*правда\*, якщо ділянка знаходиться на перехресті двох доріг;
- **green-light-up** - \*правда\*, якщо зелене світло над перехрестям, інакше - \*неправда\*;
- **my-row** - рядок перехрестя, -1 для ділянок, що не перетинаються.
- **my-column** - стовпець перехрестя, -1 для ділянок, що не перетинаються.
- **my-phase** - фаза перехрестя
- **auto** - параметр, що відповідає за автоматичне перемикання перехрестя. \*неправда\* для ділянок без перехресть.


### Показники роботи системи:

- **Stopped cars** - відображає кількість зупинених автомобілів на кожному кроці моделювання

- **Average Speed of Cars** - відображає середню швидкість автомобілів на кожному кроці моделювання

- **Average Wait Time of Cars** - відображає середній час очікування автомобілів для початку руху на кожному кроці моделювання

### Керуючі параметри:

- **grid-size-X** - кількість горизонтальних ліній доріг
- **grid-size-Y** - кількість вертикальних ліній доріг
- **num-cars** - кількість машин, що приймають участь у моделюванні
- **power** - наявність електроенергії, впливає на роботу світлофорів
- **ticks-per-cycle** - кількість кроків у циклів, впливає на часові проміжки між перемиканням сигналів світлофорів
- **speed-limit** - максимальна швидкість автомобілів
- **current-auto** - параметр, що відповідає за автоматичне перемикання світлофорів на поточному перехресті
- **current-phase** - параметр, що відповідає за зміщення перемикання світлофорів на поточному перехресті у часі
- **change light** - параметр, який дозволяє примусово змінити колір світлофору

### Примітки:

Під час запуску моделювання з параметрами за замовчуванням інколи виникає ситуація, коли рух на перехресті тимчасово блокується, незважаючи на зелене світло для автомобіля, він не може продовжити рух через затор, що утворюється на перехресті в іншому напрямку.

### Недоліки моделі:

- Наявно лише два сигнала світлофора, що не відповідає реальній ситуації на дорозі.
- Тривалість сигналів світлофорів завжди є однаковою, тому немає можливості більш точного налаштування моделі.
- Сітка міської дороги є циклічною, що при великій кількості автомобілів призводить до повного паралічу руху незалежно від наявності електроенергії.
- За прискорення та гальмування відповідає тільки один параметр \*acceleration\*, що, не відповідає реальному досвіду.
- Гальмування починається тільки безпосередньо перед перешкодою, що не відповідає реальному досвіду, проте доцільно враховувати наявність перешкод на більшій відстані та скидати швидкість поступово по мірі наближення.
- Гальмування при червоному світлі світлофору відбувається моментально, що не відповідає реальному досвіду.
- Коли електроенергія відсутня, то машини починають рухатися не за правилами проїзду регульованих/нерегульованих перехресть.

<br>

## Обчислювальні експерименти

### Експеримент №1. Залежність середнього часу очікування від проміжку часу між змінами сигналів світлофорів

![Експеримент №1. Залежність середнього часу очікування від проміжку часу між змінами сигналів світлофорів](test1.png)

Початкові умови:
- **Grid size x** = 3
-  **Grid size y** = 3
- **Power** = true
- **Num cars** = 100
- **Speed limit** = 1



**Висновки:** З графіка видно, що найбільш оптимальне значення для світлофорів з точки зору середнього часу очікування — це 20. Відхилення від цього значення, як у бік збільшення, так і зменшення інтервалу між зміною кольорів, призводить до зростання середнього часу очікування. Варто зазначити, що при значеннях 5, 10 та 15, спостерігаються значні коливання часу очікування, що часто призводить до утворення тривалих заторів і навіть повного блокування руху під час моделювання. Тому для цих значень було обрано найбільш успішні спроби з відносно рівномірним розподілом часу очікування.

<br>

### Експеримент №2. Залежність середнього часу очікування від обмежень швидкості руху

![Експеримент №2. Залежність середнього часу очікування та середньої швидкості руху від обмежень швидкості руху](test2.png)

Початкові умови:

- **Grid size x** = 3
- **Grid size y** = 3
- **Power** =true
- **Num cars** =100
- **Ticks per cycle** =20

Результати експерименту:
<table>
<thead>
<tr><th>Обмеження швидкості</th><th>Час очікування</th></tr>
</thead>
<tbody>
<tr><td>0,1</td><td>3,58</td></tr>
<tr><td>0,2</td><td>4,85</td></tr>
<tr><td>0,3</td><td>3,08</td></tr>
<tr><td>0,4</td><td>3,73</td></tr>
<tr><td>0,5</td><td>4,26</td></tr>
<tr><td>0,6</td><td>4,88</td></tr>
<tr><td>0,7</td><td>5,64</td></tr>
<tr><td>0,8</td><td>5,35</td></tr>
<tr><td>0,9</td><td>5,84</td></tr>
<tr><td>1</td><td>5,44</td></tr>
</tbody>
</table>  

**Висновки:** з графіка видно, що збільшення максимальної швидкості призводить до збільшення середнього часу очікування перед початком руху, що є логічним, оскільки водій швидше наближається до світлофора і розпочинає очікування. Починаючи з обмеження швидкості 0.5, значного зростання часу очікування не спостерігається. Найоптимальнішим варіантом виявилось обмеження швидкості 0.3.

<br>

### Експеримент №3. Залежність середнього часу очікування від кількості автомобілів на дорозі

![Експеримент №3. Залежність середнього часу очікування від кількості автомобілів на дорозі](test3.png)


Початкові умови:
- **Grid size x** = 3
- **Grid size y** = 3
- **Power** = true
- **Speed limit** = 0.5
- **Ticks per cycle** = 20

Результати експерименту:
<table>
<thead>
<tr><th>Кількість машин</th><th>Час очікування</th><th>Швидкість</th><th>Відсоток від макимально дозволеної швидкості</th></tr>
</thead>
<tbody>
<tr><td>50</td><td>3,42</td></tr>
<tr><td>60</td><td>3,58</td></tr>
<tr><td>70</td><td>3,85</td></tr>
<tr><td>80</td><td>3,73</td></tr>
<tr><td>90</td><td>3,9</td></tr>
<tr><td>100</td><td>4,47</td></tr>
<tr><td>110</td><td>4,92</td></tr>
</tbody>
</table>  

**Висновки:** З графіка видно, що зростання завантаженості дороги призводить до збільшення часу очікування. Проте, в діапазоні 50-80 автомобілів на дорозі не спостерігається значного підвищення часу очікування — така кількість транспортних засобів добре обробляється моделлю.
